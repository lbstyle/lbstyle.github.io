// --- Show keyboard button ---
document.getElementById("showBtn").onclick = () => {
  ta.focus(); // Focus textarea first

  // Fullscreen workaround
  document.documentElement.requestFullscreen()
    .then(() => setTimeout(() => document.exitFullscreen(), 120))
    .catch(e => log("Fullscreen request failed: " + e));

  // Request virtual keyboard
  if (navigator.virtualKeyboard?.show) {
    navigator.virtualKeyboard.show()
      .then(() => log("Requested: show()"))
      .catch(e => log("show() error: " + e));
  } else {
    log("âŒ virtualKeyboard.show() not supported");
  }
};

// --- Listen to geometry changes ---
if ('virtualKeyboard' in navigator) {
  navigator.virtualKeyboard.ongeometrychange = () => {
    log("geometrychange: keyboard height = " +
        navigator.virtualKeyboard.boundingRect.height + "px");

    // Show and adjust the fake bar only after keyboard opens
    showFakeBar();
    adjustFakeBar();
  };
}

// --- Hide keyboard ---
document.getElementById("hideBtn").onclick = () => {
  if (navigator.virtualKeyboard?.hide) {
    navigator.virtualKeyboard.hide()
      .then(() => log("Requested: hide()"))
      .catch(e => log("hide() error: " + e));
  }
  hideFakeBar();
};
