<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
  body { font-family: Arial, sans-serif; padding: 20px; line-height: 1.5; }
  button { padding: 12px 18px; font-size: 16px; margin-right: 10px; }
  textarea { width: 100%; height: 80px; font-size: 18px; }
</style>
</head>
<body>


<button id="showBtn">Show Keyboard</button>

<br><br>

<textarea id="ta" placeholder="Textarea for forced focus…"></textarea>

<pre id="log"></pre>

<script>
const log = msg => {
  document.getElementById('log').textContent += msg + "\n";
};

// Show keyboard
document.getElementById("showBtn").onclick = () => {
  const ta = document.getElementById("ta");
  ta.focus(); // MUST focus first

  // Fullscreen trick for Android Chrome
  document.documentElement.requestFullscreen()
    .then(() => setTimeout(() => document.exitFullscreen(), 120))
    .catch(e => log("Fullscreen request failed: " + e));

  // Delay prevents Chrome focus/show race condition on Android
  setTimeout(() => {
    if (navigator.virtualKeyboard?.show) {
      navigator.virtualKeyboard.show()
        .then(() => log("Requested: show()"))
        .catch(e => log("show() error: " + e));
    } else {
      log("❌ virtualKeyboard.show() not supported");
    }
  }, 50);
};

// Hide keyboa

// Listen to geometry change events
if ('virtualKeyboard' in navigator) {
  navigator.virtualKeyboard.ongeometrychange = (ev) => {
    log("geometrychange: keyboard height = " +
        navigator.virtualKeyboard.boundingRect.height + "px");
  };
} else {
  log("❌ navigator.virtualKeyboard NOT supported.");
}
</script>

</body>
</html>
