<!DOCTYPE html>
<html lang="en">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Fake Omnibox on Keyboard Open</title>

<style>
  body {
    font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
    margin: 0;
    padding: 20px;
  }

  /* Fake Chrome omnibox */
  .fake-omnibox {
    display: none;
    margin-bottom: 10px;
    padding: 10px 14px;
    border-radius: 22px;
    background: #f1f3f4;
    box-shadow: 0 1px 3px rgba(0,0,0,0.2);
    font-size: 15px;
    color: #444;
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .fake-omnibox.show {
    display: flex;
  }

  .lock {
    font-size: 14px;
  }

  .url {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  button {
    padding: 12px 18px;
    font-size: 16px;
  }

  textarea {
    width: 100%;
    font-size: 18px;
    padding: 10px;
    margin-top: 20px;
    box-sizing: border-box;
  }

  .spacer {
    height: 900px;
  }
</style>
</head>

<body>

<!-- Fake Omnibox -->
<div class="fake-omnibox" id="fakeOmnibox">
  <span class="lock">ðŸ”’</span>
  <span class="url">https://google.com</span>
</div>

<button id="showBtn">Show Keyboard</button>

<textarea id="ta" placeholder="Tap here to open keyboardâ€¦"></textarea>

<div class="spacer"></div>

<script>
const fakeOmnibox = document.getElementById('fakeOmnibox');
const ta = document.getElementById('ta');

function getKeyboardHeight() {
  const vv = window.visualViewport;
  if (!vv) return 0;
  return Math.max(0, window.innerHeight - vv.height - vv.offsetTop);
}

function updateOmnibox() {
  const keyboardHeight = getKeyboardHeight();

  // Keyboard open â†’ show fake omnibox
  if (keyboardHeight > 0) {
    fakeOmnibox.classList.add('show');
  } else {
    fakeOmnibox.classList.remove('show');
  }
}

// Detect keyboard open / close
if ('visualViewport' in window) {
  window.visualViewport.addEventListener('resize', updateOmnibox);
}

// Button forces keyboard open
document.getElementById('showBtn').onclick = async () => {
  ta.focus();

  try {
    await document.documentElement.requestFullscreen();
  } catch (e) {}

  setTimeout(async () => {
    if (navigator.virtualKeyboard?.show) {
      try { await navigator.virtualKeyboard.show(); } catch (e) {}
    }
    updateOmnibox();
  }, 150);
};
</script>

</body>
</html>
